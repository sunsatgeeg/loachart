let reward_bonus_array = [
                            {
                                "bossname":"아르고스",
                                "bossitem":"",
                                "phase":3,
                                "phaserewardgold":[300,300,400], 
                                "phasebonusrewardgold":[100,150,150], 
                                "phaserewarditem":[0,0,0], 
                                "phasebonusrewarditem":[
                                                        [
                                                            ["수호석 결정",120],
                                                            ["파괴석 결정",60],
                                                            ["명예의 파편",520],
                                                            ["위대한 명예의 돌파석",5]
                                                        ],
                                                        [
                                                            ["수호석 결정",180],
                                                            ["파괴석 결정",90],
                                                            ["명예의 파편",680],
                                                            ["위대한 명예의 돌파석",5]
                                                        ],
                                                        [
                                                            ["수호석 결정",240],
                                                            ["파괴석 결정",120],
                                                            ["명예의 파편",720],
                                                            ["위대한 명예의 돌파석",5]
                                                        ]
                                                        ]
                            },
                            {
                                "bossname":"발탄(노말)",
                                "bossitem":"마수의 뼈",
                                "phase":2,
                                "phaserewardgold":[500,700],
                                "phasebonusrewardgold":[300,400],
                                "phaserewarditem":[1,2],
                                "phasebonusrewarditem":[
                                                        [
                                                            ["수호석 결정",480],
                                                            ["파괴석 결정",240],
                                                            ["명예의 파편",400],
                                                            ["위대한 명예의 돌파석",6],
                                                            ["마수의 뼈",1]
                                                        ],
                                                        [
                                                            ["수호석 결정",600],
                                                            ["파괴석 결정",300],
                                                            ["명예의 파편",700],
                                                            ["위대한 명예의 돌파석",7],
                                                            ["마수의 뼈",2]
                                                        ]
                                                        ]
                            },
                            {
                                "bossname":"발탄(하드)",
                                "bossitem":"마수의 뼈",
                                "phase":2,
                                "phaserewardgold":[700,1100],
                                "phasebonusrewardgold":[450,600],
                                "phaserewarditem":[3,3],
                                "phasebonusrewarditem":[
                                                        [
                                                            ["수호석 결정",720],
                                                            ["파괴석 결정",360],
                                                            ["명예의 파편",1000],
                                                            ["위대한 명예의 돌파석",10],
                                                            ["마수의 뼈",3]
                                                        ],
                                                        [
                                                            ["수호석 결정",960],
                                                            ["파괴석 결정",480],
                                                            ["명예의 파편",1300],
                                                            ["위대한 명예의 돌파석",10],
                                                            ["마수의 뼈",3]
                                                        ]
                                                        ]
                            },
                            {
                                "bossname":"비아키스(노말)",
                                "bossitem":"욕망의 날개",
                                "phase":3,
                                "phaserewardgold":[400,500,700],
                                "phasebonusrewardgold":[200,250,400],
                                "phaserewarditem":[1,1,1],
                                "phasebonusrewarditem":[
                                                        [
                                                            ["수호석 결정",300],
                                                            ["파괴석 결정",150],
                                                            ["명예의 파편",480],
                                                            ["위대한 명예의 돌파석",6],
                                                            ["욕망의 날개",1]
                                                        ],
                                                        [
                                                            ["수호석 결정",480],
                                                            ["파괴석 결정",240],
                                                            ["명예의 파편",600],
                                                            ["위대한 명예의 돌파석",6],
                                                            ["욕망의 날개",1]
                                                        ],
                                                        [
                                                            ["수호석 결정",600],
                                                            ["파괴석 결정",300],
                                                            ["명예의 파편",900],
                                                            ["위대한 명예의 돌파석",7],
                                                            ["욕망의 날개",1]
                                                        ]
                                                        ]
                            },
                            {
                                "bossname":"비아키스(하드)",
                                "bossitem":"욕망의 날개",
                                "phase":3,
                                "phaserewardgold":[600,700,1100],
                                "phasebonusrewardgold":[300,300,600],
                                "phaserewarditem":[2,2,2],
                                "phasebonusrewarditem":[
                                                        [
                                                            ["수호석 결정",480],
                                                            ["파괴석 결정",240],
                                                            ["명예의 파편",1200],
                                                            ["위대한 명예의 돌파석",10],
                                                            ["욕망의 날개",2]
                                                        ],
                                                        [
                                                            ["수호석 결정",720],
                                                            ["파괴석 결정",360],
                                                            ["명예의 파편",1200],
                                                            ["위대한 명예의 돌파석",10],
                                                            ["욕망의 날개",2]
                                                        ],
                                                        [
                                                            ["수호석 결정",960],
                                                            ["파괴석 결정",480],
                                                            ["명예의 파편",1500],
                                                            ["위대한 명예의 돌파석",10],
                                                            ["욕망의 날개",2]
                                                        ]
                                                        ]
                            },
                            {
                                "bossname":"쿠크세이튼(노말)",
                                "bossitem":"광기의 나팔",
                                "phase":3,
                                "phaserewardgold":[1000,1000,2500],
                                "phasebonusrewardgold":[800,1000,1300],
                                "phaserewarditem":[1,2,2],
                                "phasebonusrewarditem":[
                                                        [
                                                            ["수호석 결정",600],
                                                            ["파괴석 결정",300],
                                                            ["명예의 파편",1300],
                                                            ["위대한 명예의 돌파석",12],
                                                            ["광기의 나팔",1]
                                                        ],
                                                        [
                                                            ["수호석 결정",840],
                                                            ["파괴석 결정",420],
                                                            ["명예의 파편",1300],
                                                            ["위대한 명예의 돌파석",12],
                                                            ["광기의 나팔",2]
                                                        ],
                                                        [
                                                            ["수호석 결정",1080],
                                                            ["파괴석 결정",540],
                                                            ["명예의 파편",1600],
                                                            ["위대한 명예의 돌파석",12],
                                                            ["광기의 나팔",2]
                                                        ]
                                                        ]
                            },
                            {
                                "bossname":"아브렐슈드(노말)",
                                "bossitem":"몽환의 뿔",
                                "phase":6,
                                "phaserewardgold":[2000,2500,700,800,1000,1500],
                                "phasebonusrewardgold":[400,600,700,800,900,1100],
                                "phaserewarditem":[3,4,3,4,3,5],
                                "phasebonusrewarditem":[
                                                        [
                                                            ["수호강석",160],
                                                            ["파괴강석",80],
                                                            ["명예의 파편",1400],
                                                            ["경이로운 명예의 돌파석",4],
                                                            ["몽환의 뿔",3]
                                                        ],
                                                        [
                                                            ["수호강석",200],
                                                            ["파괴강석",100],
                                                            ["명예의 파편",1600],
                                                            ["경이로운 명예의 돌파석",6],
                                                            ["몽환의 뿔",4]
                                                        ],
                                                        [
                                                            ["수호강석",200],
                                                            ["파괴강석",100],
                                                            ["명예의 파편",1400],
                                                            ["경이로운 명예의 돌파석",4],
                                                            ["몽환의 뿔",3]
                                                        ],
                                                        [
                                                            ["수호강석",280],
                                                            ["파괴강석",140],
                                                            ["명예의 파편",1600],
                                                            ["경이로운 명예의 돌파석",6],
                                                            ["몽환의 뿔",4]
                                                        ],
                                                        [
                                                            ["수호강석",360],
                                                            ["파괴강석",180],
                                                            ["명예의 파편",1700],
                                                            ["경이로운 명예의 돌파석",6],
                                                            ["몽환의 뿔",3]
                                                        ],
                                                        [
                                                            ["수호강석",480],
                                                            ["파괴강석",240],
                                                            ["명예의 파편",2400],
                                                            ["경이로운 명예의 돌파석",8],
                                                            ["몽환의 뿔",5]
                                                        ]
                                                        ]
                            },
                            {
                                "bossname":"아브렐슈드(하드)",
                                "bossitem":"몽환의 사념",
                                "phase":6,
                                "phaserewardgold":[2500,3000,900,1100,1200,1800],
                                "phasebonusrewardgold":[700,800,900,1100,1100,1400],
                                "phaserewarditem":[3,4,3,4,3,5],
                                "phasebonusrewarditem":[
                                                        [
                                                            ["수호강석",240],
                                                            ["파괴강석",120],
                                                            ["명예의 파편",1600],
                                                            ["경이로운 명예의 돌파석",8],
                                                            ["몽환의 사념",3]
                                                        ],
                                                        [
                                                            ["수호강석",360],
                                                            ["파괴강석",180],
                                                            ["명예의 파편",2000],
                                                            ["경이로운 명예의 돌파석",8],
                                                            ["몽환의 사념",4]
                                                        ],
                                                        [
                                                            ["수호강석",360],
                                                            ["파괴강석",180],
                                                            ["명예의 파편",1600],
                                                            ["경이로운 명예의 돌파석",8],
                                                            ["몽환의 사념",3]
                                                        ],
                                                        [
                                                            ["수호강석",480],
                                                            ["파괴강석",240],
                                                            ["명예의 파편",2000],
                                                            ["경이로운 명예의 돌파석",8],
                                                            ["몽환의 사념",4]
                                                        ],
                                                        [
                                                            ["수호강석",600],
                                                            ["파괴강석",300],
                                                            ["명예의 파편",2400],
                                                            ["경이로운 명예의 돌파석",10],
                                                            ["몽환의 사념",3]
                                                        ],
                                                        [
                                                            ["수호강석",900],
                                                            ["파괴강석",450],
                                                            ["명예의 파편",3000],
                                                            ["경이로운 명예의 돌파석",15],
                                                            ["몽환의 사념",5]
                                                        ]
                                                        ]
                            },
                            {
                                "bossname":"카양겔(노말)",
                                "bossitem":"",
                                "phase":['넬라시아','요람'],
                                "phaserewardgold":[0,0],
                                "phasebonusrewardgold":[400,600],
                                "phaserewarditem":[0,0],
                                "phasebonusrewarditem":[
                                                        [
                                                            ["수호석 결정",840],
                                                            ["파괴석 결정",420],
                                                            ["명예의 파편",1400],
                                                            ["위대한 명예의 돌파석",12],
                                                        ],
                                                        [
                                                            ["수호석 결정",240],
                                                            ["파괴석 결정",120],
                                                            ["명예의 파편",1600],
                                                            ["위대한 명예의 돌파석",12],
                                                        ]
                                                        ]
                            },
                            {
                                "bossname":"카양겔(하드Ⅰ)",
                                "bossitem":"",
                                "phase":['넬라시아','요람'],
                                "phaserewardgold":[0,0],
                                "phasebonusrewardgold":[700,800],
                                "phaserewarditem":[0,0],
                                "phasebonusrewarditem":[
                                                        [
                                                            ["수호강석",200],
                                                            ["파괴강석",100],
                                                            ["명예의 파편",1400],
                                                            ["경이로운 명예의 돌파석",4],
                                                        ],
                                                        [
                                                            ["수호강석",280],
                                                            ["파괴강석",140],
                                                            ["명예의 파편",1600],
                                                            ["경이로운 명예의 돌파석",6],
                                                        ]
                                                        ]
                            },
                            {
                                "bossname":"카양겔(하드Ⅱ)",
                                "bossitem":"관조의 빛무리",
                                "phase":['넬라시아','요람'],
                                "phaserewardgold":[0,0],
                                "phasebonusrewardgold":[900,1100],
                                "phaserewarditem":[1,2],
                                "phasebonusrewarditem":[
                                                        [
                                                            ["수호강석",360],
                                                            ["파괴강석",180],
                                                            ["명예의 파편",1600],
                                                            ["경이로운 명예의 돌파석",8],
                                                            ["관조의 빛무리",1]
                                                        ],
                                                        [
                                                            ["수호강석",480],
                                                            ["파괴강석",240],
                                                            ["명예의 파편",2000],
                                                            ["경이로운 명예의 돌파석",8],
                                                            ["관조의 빛무리",2]
                                                        ]
                                                        ]
                            },
                            {
                                "bossname":"카양겔(하드Ⅲ)",
                                "bossitem":"관조의 빛무리",
                                "phase":['넬라시아','요람'],
                                "phaserewardgold":[0,0],
                                "phasebonusrewardgold":[1100,1400],
                                "phaserewarditem":[2,3],
                                "phasebonusrewarditem":[
                                                        [
                                                            ["정제된 수호강석",150],
                                                            ["정제된 파괴강석",75],
                                                            ["명예의 파편",2400],
                                                            ["찬란한 명예의 돌파석",3],
                                                            ["관조의 빛무리",2]
                                                        ],
                                                        [
                                                            ["정제된 수호강석",230],
                                                            ["정제된 파괴강석",115],
                                                            ["명예의 파편",3000],
                                                            ["찬란한 명예의 돌파석",4],
                                                            ["관조의 빛무리",3]
                                                        ]
                                                        ]
                            },
                            {
                                "bossname":"일리아칸(노말)",
                                "bossitem":"쇠락한 눈동자",
                                "phase":3,
                                "phaserewardgold":[1500,1750,2250],
                                "phasebonusrewardgold":[900,1100,1500],
                                "phaserewarditem":[3,3,5],
                                "phasebonusrewarditem":[
                                                        [
                                                            ["정제된 수호강석",240],
                                                            ["정제된 파괴강석",120],
                                                            ["명예의 파편",3000],
                                                            ["찬란한 명예의 돌파석",6],
                                                            ["쇠락한 눈동자",3]
                                                        ],
                                                        [
                                                            ["정제된 수호강석",320],
                                                            ["정제된 파괴강석",160],
                                                            ["명예의 파편",3000],
                                                            ["찬란한 명예의 돌파석",8],
                                                            ["쇠락한 눈동자",3]
                                                        ],
                                                        [
                                                            ["정제된 수호강석",480],
                                                            ["정제된 파괴강석",240],
                                                            ["명예의 파편",4200],
                                                            ["찬란한 명예의 돌파석",11],
                                                            ["쇠락한 눈동자",5]
                                                        ],
                                                        ]
                            },
                            {
                                "bossname":"일리아칸(하드)",
                                "bossitem":"쇠락한 눈동자",
                                "phase":3,
                                "phaserewardgold":[1750,2000,3750],
                                "phasebonusrewardgold":[1200,1400,1900],
                                "phaserewarditem":[7,7,8],
                                "phasebonusrewarditem":[
                                                        [
                                                            ["정제된 수호강석",400],
                                                            ["정제된 파괴강석",200],
                                                            ["명예의 파편",4000],
                                                            ["찬란한 명예의 돌파석",9],
                                                            ["쇠락한 눈동자",7]
                                                        ],
                                                        [
                                                            ["정제된 수호강석",480],
                                                            ["정제된 파괴강석",240],
                                                            ["명예의 파편",4000],
                                                            ["찬란한 명예의 돌파석",12],
                                                            ["쇠락한 눈동자",7]
                                                        ],
                                                        [
                                                            ["정제된 수호강석",720],
                                                            ["정제된 파괴강석",360],
                                                            ["명예의 파편",5500],
                                                            ["찬란한 명예의 돌파석",18],
                                                            ["쇠락한 눈동자",8]
                                                        ],
                                                        ]
                            },
                            {
                                "bossname":"짓밟힌 정원(노말)",
                                "bossitem":"선명한 지혜의 기운",
                                "phase":4,
                                "phaserewardgold":[1250,1500,2000,2750],
                                "phasebonusrewardgold":[700,800,900,1100],
                                "phaserewarditem":[2,2,3,1],
                                "phasebonusrewarditem":[
                                                        [
                                                            ["정제된 수호강석",200],
                                                            ["정제된 파괴강석",100],
                                                            ["명예의 파편",3000],
                                                            ["찬란한 명예의 돌파석",2],
                                                            ["선명한 지혜의 기운",2]
                                                        ],
                                                        [
                                                            ["정제된 수호강석",200],
                                                            ["정제된 파괴강석",100],
                                                            ["명예의 파편",3000],
                                                            ["찬란한 명예의 돌파석",2],
                                                            ["선명한 지혜의 기운",2]
                                                        ],
                                                        [
                                                            ["정제된 수호강석",320],
                                                            ["정제된 파괴강석",160],
                                                            ["명예의 파편",4000],
                                                            ["찬란한 명예의 돌파석",3],
                                                            ["선명한 지혜의 기운",3]
                                                        ],
                                                        [
                                                            ["정제된 수호강석",400],
                                                            ["정제된 파괴강석",200],
                                                            ["명예의 파편",4500],
                                                            ["찬란한 명예의 돌파석",3],
                                                            ["선명한 지혜의 기운",1]
                                                        ],
                                                        ]
                            },
                            {
                                "bossname":"짓밟힌 정원(하드)",
                                "bossitem":"빛나는 지혜의 기운",
                                "phase":4,
                                "phaserewardgold":[1500,2000,3000,4500],
                                "phasebonusrewardgold":[1000,1000,1500,2000],
                                "phaserewarditem":[2,2,3,1],
                                "phasebonusrewarditem":[
                                                        [
                                                            ["정제된 수호강석",300],
                                                            ["정제된 파괴강석",150],
                                                            ["명예의 파편",4000],
                                                            ["찬란한 명예의 돌파석",3],
                                                            ["빛나는 지혜의 기운",2]
                                                        ],
                                                        [
                                                            ["정제된 수호강석",300],
                                                            ["정제된 파괴강석",150],
                                                            ["명예의 파편",4000],
                                                            ["찬란한 명예의 돌파석",3],
                                                            ["빛나는 지혜의 기운",2]
                                                        ],
                                                        [
                                                            ["정제된 수호강석",480],
                                                            ["정제된 파괴강석",240],
                                                            ["명예의 파편",5000],
                                                            ["찬란한 명예의 돌파석",5],
                                                            ["빛나는 지혜의 기운",3]
                                                        ],
                                                        [
                                                            ["정제된 수호강석",600],
                                                            ["정제된 파괴강석",300],
                                                            ["명예의 파편",5500],
                                                            ["찬란한 명예의 돌파석",7],
                                                            ["빛나는 지혜의 기운",1]
                                                        ],
                                                        ]
                            },
];

const bossColor = {"아르고스":"#ffffff", "발탄":"#5f9ea0", "비아키스":"#ff1493", "쿠크세이튼":"#ff703b", "아브렐슈드":"#8a2be2", "카양겔":"#ffd700", "일리아칸":"#006400", "짓밟힌 정원":"#00ccff"};
const iteminfo = {
    "명예의 파편":1,

    "수호석 결정":10,
    "파괴석 결정":10,
    "위대한 명예의 돌파석":1,

    "수호강석":10,
    "파괴강석":10,
    "경이로운 명예의 돌파석":1,
    
    "정제된 수호강석":10,
    "정제된 파괴강석":10,
    "찬란한 명예의 돌파석":1
};

Number.prototype.toFixedNumber = function(x, base){
    let pow = Math.pow(base||10,x);
    return Math.round(this*pow) / pow;
}

function itemMaterialTradeName(itemname){
    if(document.querySelector('#material').value >= 2){
        if(itemname == '수호석 결정') itemname = `수호강석`;
        if(itemname == '파괴석 결정') itemname = `파괴강석`;
        if(itemname == '위대한 명예의 돌파석') itemname = `경이로운 명예의 돌파석`;
    }
    if(document.querySelector('#material').value >= 3){
        if(itemname == '수호강석') itemname = `정제된 수호강석`
        if(itemname == '파괴강석') itemname = `정제된 파괴강석`
        if(itemname == '경이로운 명예의 돌파석') itemname = `찬란한 명예의 돌파석`;
    }

    return itemname;
}
function itemMaterialTradeQty(itemname, itemqty){
    if(document.querySelector('#material').value == 2){
        if(itemname == '수호석 결정' || itemname == '파괴석 결정' || itemname == '위대한 명예의 돌파석'){
            itemqty = itemqty / 5;
        }
    }
    else if(document.querySelector('#material').value == 3){
        if(itemname == '수호석 결정' || itemname == '파괴석 결정' || itemname == '위대한 명예의 돌파석'){
            itemqty = itemqty / 25;
        }
        if(itemname == '수호강석' || itemname == '파괴강석' || itemname == '경이로운 명예의 돌파석'){
            itemqty = itemqty / 5;
        }
    }

    return Number.isInteger(itemqty) ? itemqty : itemqty.toFixed(1)
}

let content = "";
let marketdata = {}
function calcreward(){
    target = document.querySelector('#bossaccordion');
    while (target.hasChildNodes()) {
        target.removeChild(target.firstChild);
    }

    reward_bonus_array.forEach(function(boss, index){
        content = 
            `
                <div class="accordion-item">
                <h2 class="accordion-header" id="heading${index}">
                <button class="accordion-button collapsed fw-bold" type="button" style="color:${bossColor[boss['bossname'].substring(0, boss['bossname'].indexOf('('))]}" data-bs-target="#collapse${index}" aria-controls="collapse${index}" data-bs-toggle="collapse" aria-expanded="false">
                    ${boss['bossname']}
                </button>
                </h2>
                <div id="collapse${index}" class="accordion-collapse collapse" aria-labelledby="heading${index}" data-bs-parent="#bossaccordion">
                <div class="accordion-body p-0">
                    <table class="table table-dark table-hover mb-0">
                    <thead>
                        <tr>
                        <th scope="col">관문</th>
                        <th scope="col">획득 골드</th>
                        <th scope="col">더보기 비용</th>
                        <th scope="col">기본 보상</th>
                        <th scope="col">더보기 보상</th>
                        <th scope="col">/</th>
                        <th scope="col">이익</th>
                        </tr>
                    </thead>
            `;
        let phasecount = null;
        if(Array.isArray(boss['phase'])){
            phasecount = boss['phase'].length;
        }else{
            phasecount = boss['phase'];
        }

        for (let i = 0; i < phasecount; i++) {
            content += 
                `
                    <tbody class="align-middle">
                        <tr>
                `;

            if(Array.isArray(boss['phase'])){
                content += '<th scope="row">' + boss['phase'][i]; + '</th>'
            }else{
                content += '<th scope="row">' + String(i+1) + '관문'; + '</th>'
            }

            content +=
                `
                    <td>
                        <span id="cleargold">${boss['phaserewardgold'][i]}</span><span><img src="img/gold.png" class="ms-1 img-gold"></span>
                    </td>
                    <td>
                        <span id="bonusgold">${boss['phasebonusrewardgold'][i]}</span><span><img src="img/gold.png" class="ms-1 img-gold"></span>
                    </td>
                `;

            if(boss['bossitem'] != ""){
                content +=
                    `
                        <td>
                            <span>${boss['bossitem']} </span>${boss['phaserewarditem'][i]}<span>개</span>
                        </td>
                    `;
            }else{
                content +=
                    `
                        <td></td>
                    `;
            }

            content += 
                `
                    <td>
                `;

            for (let j = 0; j < boss['phasebonusrewarditem'][i].length; j++) {
                let itemName = itemMaterialTradeName(boss['phasebonusrewarditem'][i][j][0]);
                let itemQty = itemMaterialTradeQty(boss['phasebonusrewarditem'][i][j][0], boss['phasebonusrewarditem'][i][j][1]);
                content += `<p><span id="rewarditemname">${itemName}</span> × <span id="rewarditemqty">${itemQty}</span></p>`;
            }

            content += 
                `
                    </td>
                    <td>
                `;
            let totalbonusrewardgold = 0.0;
            for (let j = 0; j < boss['phasebonusrewarditem'][i].length; j++) {
                let itemName = itemMaterialTradeName(boss['phasebonusrewarditem'][i][j][0]);
                let itemQty = itemMaterialTradeQty(boss['phasebonusrewarditem'][i][j][0], boss['phasebonusrewarditem'][i][j][1]);

                if(filteritemlist.includes(itemName)){
                    content += `<p>　</p>`;
                    continue;
                }
                if(boss['bossitem'] == itemName){
                    if(filteritemlist.includes('혼돈의 돌')){
                        content += `<p>　</p>`;
                        continue;
                    }
                    content += `<p><span id="rewarditemname">100</span> × <span id="rewarditemqty">${itemQty}</span> = <span>${parseInt(100 * itemQty)}</span></p>`;
                    totalbonusrewardgold += (100 * itemQty);
                    continue;
                }

                let itemGold = Number.isInteger(marketdata[itemName]) ? marketdata[itemName] : marketdata[itemName].toFixedNumber(3);
                let itemTradeQty = Number.isInteger(itemQty / iteminfo[itemName]) ? itemQty / iteminfo[itemName] : (itemQty / iteminfo[itemName]).toFixedNumber(1);
                let thiscalcgold = Number.isInteger(itemGold * itemTradeQty) ? itemGold * itemTradeQty : (itemGold * itemTradeQty).toFixedNumber(1);

                content += `<p><span id="rewarditemname">${itemGold}</span> × <span id="rewarditemqty">${itemTradeQty}</span> = <span>${thiscalcgold}</span></p>`;
                totalbonusrewardgold += thiscalcgold;
            }
            content +=
                `
                    </td>
                    <td class="fw-bold">
                        <p><span>${Number.isInteger(totalbonusrewardgold) ? totalbonusrewardgold : totalbonusrewardgold.toFixed(1)}</span><span> - </span><span>${boss['phasebonusrewardgold'][i]}</span><span> = </span></span></p>
                `;
            let tempresult = 0;
            tempresult = totalbonusrewardgold - boss['phasebonusrewardgold'][i];
            temptextcolor = "#00ff00";
            if(tempresult <= 0){
                temptextcolor = "#ff6b6b";
            }
            content +=
                `
                    <p><span style="color:${temptextcolor}">${Number.isInteger(tempresult) ? tempresult : tempresult.toFixed(1)}</span><span><img src="img/gold.png" class="ms-1 img-gold"></span></p>
                `;
            content +=
                `
                            </td>
                        </tr>
                    </tbody>
                `;
        }
            
        content +=
            `
                </table>
            </div>
            </div>
            </div>
            `;
        document.querySelector('#bossaccordion').innerHTML += content;
    })
}

let filteritemlist = ['혼돈의 돌']
document.querySelector('#itemaccordion').querySelectorAll('td').forEach((e)=>{
    e.addEventListener('click', (td)=>{
        if(td.target.className == "form-check-label" || td.target.className == "btn btn-outline-light btn-lg") return;
        try{
            if(td.target.querySelector('.form-check-input').checked){
                td.target.querySelector('.form-check-input').checked = false;
            }else{
                td.target.querySelector('.form-check-input').checked = true;
            }
        }catch{}

        filteritemlist = []
        document.querySelector('#itemaccordion').querySelectorAll('.form-check-input').forEach((e)=>{
            if(e.checked){
                filteritemlist.push(e.value)
            }
        });
        calcreward();
    });
});

document.querySelector('#material').addEventListener('change', ()=>{
    calcreward();
});

document.querySelector('#itemaccordion').querySelectorAll('.btn-outline-light').forEach((e)=>{
    e.addEventListener('click', (button)=>{
        if(button.target.id == "allcheck"){
            document.querySelector('#itemaccordion').querySelectorAll('.form-check-input').forEach((f)=>{
                f.checked = true;
            });
        }else{
            document.querySelector('#itemaccordion').querySelectorAll('.form-check-input').forEach((f)=>{
                f.checked = false;
            });
        }
        
        filteritemlist = []
        document.querySelector('#itemaccordion').querySelectorAll('.form-check-input').forEach((e)=>{
            if(e.checked){
                filteritemlist.push(e.value)
            }
        });
        calcreward();
    });
});

document.addEventListener("DOMContentLoaded", function(){
    // fetch(url + '/rewardcalc', {method: 'POST'})
    // .then((response) => response.json())
    // .then((data) =>{
    //     data['명예의 파편'] = parseFloat(data['명예의 파편 주머니(대)']/1500);

    //     marketdata = data;

    //     datatime = data['date'];
    //     db_year = datatime.slice(0,4);
    //     db_mon = datatime.slice(4,6);
    //     db_day = datatime.slice(6,8);
    //     db_hour = datatime.slice(8,10);
    //     db_min = datatime.slice(10,12);
    //     document.querySelector('#date').innerText = db_year + "-" + db_mon + "-" + db_day + " " + db_hour + ":" + db_min;

    //     calcreward();
    // });

    (()=>{
        let data = {
            "3T 보석 10레벨 멸화": 449000,
            "3T 보석 10레벨 홍염": 210000,
            "3T 보석 1레벨": 22,
            "[건슬링어] 사냥의 시간 각인서": 550,
            "[건슬링어] 피스메이커 각인서": 1849,
            "[기공사] 세맥타통 각인서": 77,
            "[기공사] 역천지체 각인서": 139,
            "[기상술사] 이슬비 각인서": 3368,
            "[기상술사] 질풍노도 각인서": 9100,
            "[데모닉] 멈출 수 없는 충동 각인서": 2200,
            "[데모닉] 완벽한 억제 각인서": 99,
            "[데빌헌터] 강화 무기 각인서": 111,
            "[데빌헌터] 핸드거너 각인서": 87,
            "[도화가] 만개 각인서": 5100,
            "[도화가] 회귀 각인서": 244,
            "[디스트로이어] 분노의 망치 각인서": 1970,
            "[디스트로이어] 중력 수련 각인서": 548,
            "[리퍼] 갈증 각인서": 760,
            "[리퍼] 달의 소리 각인서": 400,
            "[바드] 절실한 구원 각인서": 2300,
            "[바드] 진실된 용맹 각인서": 195,
            "[배틀마스터] 오의 강화 각인서": 87,
            "[배틀마스터] 초심 각인서": 430,
            "[버서커] 광기 각인서": 250,
            "[버서커] 광전사의 비기 각인서": 99,
            "[블래스터] 포격 강화 각인서": 740,
            "[블래스터] 화력 강화 각인서": 98,
            "[블레이드] 버스트 각인서": 4500,
            "[블레이드] 잔재된 기운 각인서": 1240,
            "[서머너] 넘치는 교감 각인서": 350,
            "[서머너] 상급 소환사 각인서": 1750,
            "[소서리스] 점화 각인서": 4370,
            "[소서리스] 환류 각인서": 850,
            "[스카우터] 아르데타인의 기술 각인서": 74,
            "[스카우터] 진화의 유산 각인서": 270,
            "[스트라이커] 오의난무 각인서": 319,
            "[스트라이커] 일격필살 각인서": 2298,
            "[슬레이어] 처단자 각인서": 11500,
            "[슬레이어] 포식자 각인서": 8500,
            "[아르카나] 황제의 칙령 각인서": 539,
            "[아르카나] 황후의 은총 각인서": 390,
            "[워로드] 고독한 기사 각인서": 918,
            "[워로드] 전투 태세 각인서": 150,
            "[인파이터] 극의: 체술 각인서": 1319,
            "[인파이터] 충격 단련 각인서": 490,
            "[창술사] 절정 각인서": 949,
            "[창술사] 절제 각인서": 299,
            "[호크아이] 두 번째 동료 각인서": 380,
            "[호크아이] 죽음의 습격 각인서": 90,
            "[홀리나이트] 심판자 각인서": 178,
            "[홀리나이트] 축복의 오라 각인서": 1700,
            "date": "202302221235",
            "각성 각인서": 389,
            "각성 물약": 32,
            "강령술 각인서": 3,
            "강화 방패 각인서": 1,
            "견습생용 제작 키트": 1,
            "결투의 대가 각인서": 129,
            "경이로운 명예의 돌파석": 21,
            "고고학의 결정": 60,
            "고급 선박 부품 재료": 5,
            "고급 회복약": 11,
            "고대 유물": 45,
            "구슬동자 각인서": 8,
            "굳은 의지 각인서": 1,
            "급소 타격 각인서": 100,
            "기습의 대가 각인서": 2600,
            "긴급구조 각인서": 9,
            "낚시의 결정": 20,
            "냉기 수류탄": 13,
            "다듬은 생고기": 12,
            "단단한 철광석": 20,
            "달의 숨결": 1,
            "달인용 제작 키트": 20999,
            "달인의 저력 각인서": 5,
            "대가의 안심 스테이크 정식 [10개 단위 판매]": 905,
            "대가의 양념 꼬치구이 [10개 단위 판매]": 388,
            "도구 제작 부품": 12,
            "도발 허수아비": 9,
            "돌격대장 각인서": 2888,
            "두툼한 생고기": 149,
            "들꽃": 82,
            "루테란의 나팔": 9,
            "마나 효율 증가 각인서": 1,
            "마나의 흐름 각인서": 1,
            "만능 물약": 14,
            "명예의 돌파석": 9,
            "명예의 파편 주머니(대)": 249,
            "명예의 파편 주머니(소)": 79,
            "명예의 파편 주머니(중)": 155,
            "명인의 쫄깃한 꼬치구이": 699,
            "명인의 쫄깃한 꼬치구이 [10개 단위 판매]": 259,
            "명인의 허브 스테이크 정식 [10개 단위 판매]": 493,
            "모닥불": 4,
            "목재": 54,
            "묵직한 철광석": 4,
            "바리케이드 각인서": 200,
            "번개의 분노 각인서": 3,
            "별의 숨결": 1,
            "보호 물약": 2,
            "부드러운 목재": 11,
            "부러진 뼈 각인서": 6,
            "부식 폭탄": 16,
            "분쇄의 주먹 각인서": 1,
            "불굴 각인서": 1,
            "붉은 살 생선": 3,
            "빛나는 냉기 수류탄": 34,
            "빛나는 도발 허수아비": 25,
            "빛나는 만능 물약": 44,
            "빛나는 모닥불": 14,
            "빛나는 보호 물약": 22,
            "빛나는 부식 폭탄": 34,
            "빛나는 섬광 수류탄": 17,
            "빛나는 성스러운 부적": 39,
            "빛나는 성스러운 폭탄": 22,
            "빛나는 수면 폭탄": 37,
            "빛나는 신속 로브": 34,
            "빛나는 신호탄": 22,
            "빛나는 암흑 수류탄": 43,
            "빛나는 위장 로브": 15,
            "빛나는 은신 로브": 38,
            "빛나는 전기 수류탄": 14,
            "빛나는 점토 수류탄": 50,
            "빛나는 정령의 회복약": 67,
            "빛나는 지혜의 정수": 4000,
            "빛나는 진군의 깃발": 39,
            "빛나는 천둥 물약": 13,
            "빛나는 파괴 폭탄": 40,
            "빛나는 화염 수류탄": 43,
            "빛나는 회오리 수류탄": 39,
            "상급 오레하 융화 재료": 22,
            "생명의 돌파석": 3,
            "생명의 파편 주머니(대)": 539,
            "생명의 파편 주머니(소)": 200,
            "생명의 파편 주머니(중)": 392,
            "생선": 193,
            "선명한 지혜의 정수": 10000,
            "선박 : 에이번의 상처": 1000000,
            "선박스킨 : 노스페라투": 1900000,
            "선박스킨 : 잭 오 랜턴의 유랑": 2000000,
            "선수필승 각인서": 399,
            "섬광 수류탄": 11,
            "성스러운 부적": 15,
            "성스러운 폭탄": 21,
            "속전속결 각인서": 111,
            "수렵의 결정": 34,
            "수면 폭탄": 14,
            "수줍은 들꽃": 3,
            "수호강석": 1,
            "수호석": 1,
            "수호석 결정": 1,
            "수호석 조각": 1,
            "숙련가용 제작 키트": 2,
            "슈퍼 차지 각인서": 136,
            "승부사 각인서": 98,
            "시간 정지 물약": 30,
            "시선 집중 각인서": 4,
            "신속 로브": 21,
            "신호탄": 6,
            "실드 관통 각인서": 1,
            "싱싱한 버섯": 4,
            "아드레날린 각인서": 2965,
            "아드로핀 물약": 35,
            "아크투르스의 서 : 무기": 50,
            "아크투르스의 서 : 방어구": 17,
            "아크투르스의 의지 : 무기": 70,
            "아크투르스의 의지 : 방어구": 30,
            "안정된 상태 각인서": 15,
            "암흑 수류탄": 16,
            "야금술 : 단조 기본": 2,
            "야금술 : 단조 숙련": 1200,
            "야금술 : 단조 심화": 250,
            "야금술 : 단조 응용": 20,
            "야금술 : 단조 특화": 3599,
            "야금술 : 접쇠 기본": 4,
            "야금술 : 접쇠 심화": 379,
            "야금술 : 주조 기본": 14,
            "약자 무시 각인서": 2,
            "에스더의 기운": 432650,
            "에테르 포식자 각인서": 3,
            "여신의 가호 각인서": 1,
            "영웅 선박 부품 재료": 11,
            "예리한 둔기 각인서": 3000,
            "오레하 두툼한 생고기": 39,
            "오레하 유물": 60,
            "오레하 태양 잉어": 20,
            "원한 각인서": 10000,
            "위기 모면 각인서": 1,
            "위대한 명예의 돌파석": 16,
            "위장 로브": 9,
            "은신 로브": 9,
            "일반 선박 부품 재료": 3,
            "자연산 진주": 4,
            "재봉술 : 도안 기본": 3,
            "재봉술 : 매듭 기본": 2,
            "재봉술 : 매듭 심화": 284,
            "재봉술 : 수선 기본": 1,
            "재봉술 : 수선 숙련": 630,
            "재봉술 : 수선 심화": 172,
            "재봉술 : 수선 응용": 6,
            "재봉술 : 수선 특화": 1377,
            "저주받은 인형 각인서": 2780,
            "전기 수류탄": 5,
            "전문가용 제작 키트": 2800,
            "전문의 각인서": 870,
            "점토 수류탄": 14,
            "정기 흡수 각인서": 200,
            "정령의 회복약": 32,
            "정밀 단도 각인서": 47,
            "정비소 이동 포탈 주문서": 10,
            "정제된 수호강석": 4,
            "정제된 파괴강석": 48,
            "조화의 돌파석": 3,
            "조화의 파편 주머니(대)": 317,
            "조화의 파편 주머니(소)": 101,
            "조화의 파편 주머니(중)": 209,
            "중갑 착용 각인서": 130,
            "중급 오레하 융화 재료": 10,
            "진군의 깃발": 16,
            "질긴 가죽": 6,
            "질량 증가 각인서": 1299,
            "찬란한 명예의 돌파석": 95,
            "천둥 물약": 3,
            "철광석": 20,
            "초보자용 제작 키트": 6,
            "최대 마나 증가 각인서": 9,
            "최상급 오레하 융화 재료": 49,
            "추진력 각인서": 7,
            "칼다르 두툼한 생고기": 8,
            "칼다르 유물": 1,
            "칼다르 융화 재료": 3,
            "칼다르 태양 잉어": 3,
            "크라테르의 권능 : 무기": 145,
            "크라테르의 권능 : 방어구": 78,
            "크라테르의 서 : 무기": 250,
            "크라테르의 서 : 방어구": 62,
            "크라테르의 지혜 : 무기": 75,
            "크라테르의 지혜 : 방어구": 27,
            "타격의 대가 각인서": 1870,
            "탈출의 명수 각인서": 1,
            "태양의 가호": 109,
            "태양의 은총": 39,
            "태양의 축복": 80,
            "투박한 버섯": 63,
            "튼튼한 목재": 55,
            "파괴 폭탄": 16,
            "파괴강석": 10,
            "파괴석": 1,
            "파괴석 결정": 3,
            "파괴석 조각": 2,
            "페로몬 폭탄": 15,
            "폭발물 전문가 각인서": 1,
            "하급 오레하 융화 재료": 10,
            "현자의 가루": 108,
            "화려한 버섯": 9,
            "화사한 들꽃": 11,
            "화염 수류탄": 16,
            "회복약": 3,
            "회오리 수류탄": 14,
            "희귀 선박 부품 재료": 7,
            "희귀한 유물": 10
        };

        data['명예의 파편'] = parseFloat(data['명예의 파편 주머니(대)']/1500);

        marketdata = data;

        datatime = data['date'];
        db_year = datatime.slice(0,4);
        db_mon = datatime.slice(4,6);
        db_day = datatime.slice(6,8);
        db_hour = datatime.slice(8,10);
        db_min = datatime.slice(10,12);
        document.querySelector('#date').innerText = db_year + "-" + db_mon + "-" + db_day + " " + db_hour + ":" + db_min;

        calcreward();
    })();
});
